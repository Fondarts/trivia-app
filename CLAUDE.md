# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Quizle! is a trivia game built as a hybrid mobile application using Capacitor. It's a web-based app with native Android support that features multiple game modes, user authentication, and a comprehensive question bank system.

## Development Commands

### Core Commands
- `npm run serve` - Start development server on port 8100 using http-server
- `npm run cap:sync` - Sync web assets with Capacitor native projects
- `npm run cap:android` - Open Android project in Android Studio
- `npm run cap:build` - Sync and open Android project (combined command)

### Build Process
- No traditional build step required for web assets (noted as "No build step required" in package.json)
- Web files are served directly from `www/` directory
- For Android: Use `cap:sync` to copy web assets to native project, then build through Android Studio

## Architecture

### Directory Structure
- `www/` - Main web application directory containing HTML, CSS, JS, and assets
  - `js/` - JavaScript modules organized by functionality
    - `core/` - Core utilities (config, i18n, utils, supabase client)
    - `game/` - Game logic (solo, vs, ui, bank)
    - `player/` - Player-related features (stats, achievements, profile, social)
    - `auth/` - Authentication system (Google OAuth, modals, UI)
    - `adventure/` - Adventure mode implementation
    - `platform/` - Platform-specific code (Android, ads, error handling)
    - `store/` - DLC and store functionality
  - `packs/` - Question pack JSON files organized by language (`es/`)
  - `dlc/` - Downloadable content packs with images
  - `css/` - Stylesheets (main, animations, profiles, achievements)
  - `assets/` - Static assets (logos, icons, images)
- `android/` - Native Android project generated by Capacitor
- `capacitor.config.json` - Capacitor configuration

### Key Architecture Patterns

**Modular ES6 Structure**: Core functionality is split into ES6 modules with clear separation of concerns:
- Authentication system with Google OAuth integration
- Game modes: Solo, Timed, VS (versus), and Adventure
- Player progression system with XP, levels, and achievements
- Social features including friends system and leaderboards
- Internationalization (i18n) support

**Hybrid Approach**: Uses both ES6 modules and traditional scripts:
- ES6 modules for main functionality (`js/main.js` as entry point)
- Traditional scripts for adventure mode and platform-specific features
- Supabase client loaded via UMD for cross-module compatibility

**State Management**: No formal state management library - uses:
- LocalStorage for offline persistence
- Global window objects for cross-module communication
- Supabase for server-side state synchronization

**Question Bank System**:
- JSON-based question packs in `packs/` directory
- DLC system for additional content in `dlc/` directory
- Dynamic loading based on selected categories and difficulty

## Authentication & Backend

- **Supabase Integration**: Uses Supabase for authentication, user profiles, and social features
- **Google OAuth**: Primary authentication method with fallback to guest mode
- **Offline Support**: Core gameplay works without internet connection
- **User Profiles**: Persistent profiles with nickname, level, XP, and statistics

## Platform Integration

- **Capacitor**: Hybrid app framework for native mobile deployment
- **Android**: Native Android project with Google Auth integration
- **Web**: Works as PWA with responsive design
- **Error Handling**: Comprehensive error protection for production deployment

## Game Features

### Game Modes
1. **Solo Mode**: Traditional trivia with configurable question count
2. **Timed Mode**: Race against the clock
3. **VS Mode**: Real-time multiplayer using Supabase realtime
4. **Adventure Mode**: Progressive story-based gameplay with bosses

### Social Features
- Friends system with invitations and rankings
- Global leaderboards
- Achievement system
- Profile sharing and comparison

## Development Notes

- Uses modern JavaScript (ES6+ modules) alongside legacy scripts for compatibility
- No TypeScript, linting, or formal testing setup - relies on manual testing
- Hot reload available through http-server for rapid development
- Android development requires Android Studio for native builds
- Supabase provides real-time multiplayer and social features